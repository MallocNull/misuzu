{% extends 'forum/master.twig' %}
{% from 'macros.twig' import navigation, pagination %}
{% from 'forum/macros.twig' import forum_category_listing, forum_topic_listing, forum_category_buttons %}

{% set title = forum_info.forum_name %}
{% set canonical_url = '/forum/forum.php'|url_construct({
    'f': forum_info.forum_id,
    'o': forum_offset,
}) %}

{% block content %}
    {{ navigation(forum_breadcrumbs, forum_breadcrumbs|last, true, null, 'left') }}

    {% if forum_info.forum_subforums|length > 0 or forum_info.forum_type == 1 %}
        {{ forum_category_listing(forum_info.forum_subforums, 'Forums') }}
    {% endif %}

    {% if forum_info.forum_type == 0 %}
        {% set fcbuttons = current_user is defined ? forum_category_buttons(forum_info, forum_perms) : '' %}
        {% set fcpagination = pagination(
            forum_info.forum_topic_count,
            forum_range,
            forum_offset,
            '/forum/forum.php'|url_construct({'f': forum_info.forum_id}), 'forum__'
        ) %}

        {{ fcbuttons }}
        {{ fcpagination }}
        {{ forum_topic_listing(forum_topics) }}
        {{ fcpagination }}
        {{ fcbuttons }}
    {% endif %}
{% endblock %}
