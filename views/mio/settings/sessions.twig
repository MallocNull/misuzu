{% extends '@mio/settings/master.twig' %}

{% block settings_content %}
    <div class="mio__settings__sessions">
        {% for session in user_sessions %}
            <div class="mio__settings__sessions__entry{% if session.session_id == settings_session.session_id %} mio__settings__sessions__entry--current{% endif %}" id="session-{{ session.session_id }}">
                <div class="mio__settings__sessions__column mio__settings__sessions__column--ip">
                    <div class="mio__settings__sessions__column__name">
                        IP
                    </div>
                    <div class="mio__settings__sessions__column__value">
                        {{ session.session_ip.string }} <img class="mio__settings__sessions__country" src="https://static.flash.moe/flags/fff/{{ session.session_country|lower }}.png" alt="{{ session.session_country }}" title="{{ session.session_country|country_name }}">
                    </div>
                </div>
                <div class="mio__settings__sessions__column mio__settings__sessions__column--created" onmouseenter="this.children[1].textContent = '{{ session.created_at }}';" onmouseleave="this.children[1].textContent = '{{ session.created_at.diffForHumans }}';">
                    <div class="mio__settings__sessions__column__name">
                        Created
                    </div>
                    <div class="mio__settings__sessions__column__value">
                        {{ session.created_at.diffForHumans }}
                    </div>
                </div>
                <div class="mio__settings__sessions__column mio__settings__sessions__column--expires" onmouseenter="this.children[1].textContent = '{{ session.expires_on }}';" onmouseleave="this.children[1].textContent = '{{ session.expires_on.diffForHumans }}';">
                    <div class="mio__settings__sessions__column__name">
                        Expires
                    </div>
                    <div class="mio__settings__sessions__column__value">
                        {{ session.expires_on.diffForHumans }}
                    </div>
                </div>
                {% if session.user_agent|length > 0 %}
                    <div class="mio__settings__sessions__column mio__settings__sessions__column--user_agent">
                        <div class="mio__settings__sessions__column__name">
                            User Agent
                        </div>
                        <div class="mio__settings__sessions__column__value">
                            {{ session.user_agent }}
                        </div>
                    </div>
                {% endif %}
                <form class="mio__settings__sessions__column mio__settings__sessions__column--options" method="post" action="?m=sessions">
                    <input type="hidden" name="csrf" value="{{ csrf_token() }}">
                    <input type="hidden" name="session" value="{{ session.session_id }}">
                    <button class="mio__input__button mio__settings__sessions__button">Kill</button>
                </form>
            </div>
        {% endfor %}
    </div>
{% endblock %}
